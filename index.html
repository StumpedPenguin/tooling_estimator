<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Extrusion Tooling Cost Estimator</title>
  <style>
    :root { --bg:#0f172a; --panel:#111827; --accent:#60a5fa; --accent-2:#34d399; --text:#e5e7eb; --muted:#94a3b8; --border:#1f2937; --card:#0b1220; }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial;color:var(--text);background:radial-gradient(1200px 800px at 20% 0%, #0b1220, var(--bg));min-height:100vh}
    header{padding:28px 20px 8px;text-align:center}
    header h1{margin:0 0 6px;font-size:28px;letter-spacing:.3px}
    header p{margin:0;color:var(--muted);font-size:14px}
    .container{max-width:900px;margin:20px auto 60px;padding:0 16px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0));border:1px solid var(--border);border-radius:16px;padding:18px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type=number],select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:#0b1220;color:#e2e8f0;outline:none}
    .controls{display:flex;flex-wrap:wrap;gap:10px}
    .chip{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border:1px solid var(--border);border-radius:999px;background:#0a1325;color:#e2e8f0;font-size:13px}
    .btn{cursor:pointer;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#00111a;font-weight:700;border:0;padding:12px 16px;border-radius:14px;margin-top:10px}
    .result{font-size:36px;font-weight:800;margin-top:10px}
    .muted{color:var(--muted)}
    .list{list-style:none;padding:0;margin:12px 0 0}
    .list li{padding:8px 0;border-bottom:1px dashed var(--border)}
    .hint{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <h1>Extrusion Tooling Cost Estimator</h1>
    <p>Estimate the cost of a complete extrusion tooling set based on size and complexity.</p>
  </header>
  <div class="container">
    <section class="card">
      <h2>Inputs</h2>
      <label for="width">Max Width (in)</label>
      <input type="number" id="width" min="0" step="0.01" value="3">

      <label for="height">Max Height (in)</label>
      <input type="number" id="height" min="0" step="0.01" value="2">

      <label for="resin">Resin (record only)</label>
      <select id="resin">
        <option selected>PVC</option>
        <option>PE / PP / PS</option>
        <option>PMMA / Acrylic</option>
        <option>PA (glass-filled)</option>
        <option>PVDF</option>
        <option>Other</option>
      </select>

      <label>Extrusion Type</label>
      <select id="extType">
        <option selected>Profile</option>
        <option>Tube</option>
      </select>

      <div class="hint" style="margin-top:8px;">Complexity options:</div>
      <div class="controls">
        <label class="chip"><input type="radio" name="process" value="mono" checked> Mono</label>
        <label class="chip"><input type="radio" name="process" value="coex"> Coex</label>
        <label class="chip"><input type="checkbox" id="hollow"> Hollow</label>
        <label class="chip"><input type="checkbox" id="grain"> Grain</label>
      </div>

      <label style="margin-top:10px;">Run Type</label>
      <div class="controls">
        <label class="chip"><input type="radio" name="runType" value="Production" checked> Production</label>
        <label class="chip"><input type="radio" name="runType" value="Prototype"> Prototype</label>
      </div>

      <button class="btn" id="estimateBtn">Estimate Cost</button>
    </section>

    <section class="card">
      <h2>Estimate</h2>
      <div class="result" id="price">$—</div>
      <div class="muted" id="sizeClass">Size Class: —</div>
      <ul class="list" id="reasons"></ul>
    </section>
  </div>

  <script>
    if (!window.__TOOL_ESTIMATOR_INITED__) {
      window.__TOOL_ESTIMATOR_INITED__ = true;

      const BASE_BY_SIZE = { small: 8000, medium: 10000, large: 12000 };

      const dollars = n => n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0});
      const classifySize = mm => mm <= 150 ? 'small' : mm <= 350 ? 'medium' : 'large';
      const getRadioValue = name => { const el = document.querySelector(`input[name="${name}"]:checked`); return el ? el.value : null; };

      function computeEstimate(){
        const width = parseFloat(document.getElementById('width').value||'0');
        const height = parseFloat(document.getElementById('height').value||'0');
        const resin = document.getElementById('resin').value;
        const extType = document.getElementById('extType').value;
        const process = getRadioValue('process');
        const hollow = document.getElementById('hollow').checked;
        const grain = document.getElementById('grain').checked;
        const runType = getRadioValue('runType');
        if(width<=0||height<=0) return {error:'Enter positive width and height.'};

        const Pe_in = 2*(width+height);
        const Pe_mm = Pe_in*25.4;
        const size = classifySize(Pe_mm);
        const base = BASE_BY_SIZE[size];

        let C=1;
        if(process==='coex')C+=1;
        if(hollow)C+=2;
        if(C>5)C=5;
        const complexityFactor=1+0.25*(C-1);
        const price = base*complexityFactor;

        const reasons=[];
        reasons.push(`Equivalent Perimeter: ${Pe_in.toFixed(1)} in (${Pe_mm.toFixed(0)} mm) → ${size.toUpperCase()} base (${dollars(base)})`);
        reasons.push(`Complexity: ${process==='coex'?'Coex':'Mono'}${hollow?', Hollow':''} → ×${complexityFactor.toFixed(2)}`);
        reasons.push(`Recorded — Resin: ${resin}; Extrusion Type: ${extType}; Run: ${runType}${grain?'; Surface: Grain':''}`);

        return {price,size,reasons};
      }

      function render(){
        const result=computeEstimate();
        const price=document.getElementById('price');
        const sizeClass=document.getElementById('sizeClass');
        const list=document.getElementById('reasons');
        list.innerHTML='';
        if(result.error){price.textContent='$—';sizeClass.textContent='Size Class: —';return;}
        price.textContent=dollars(Math.round(result.price/10)*10);
        sizeClass.textContent='Size Class: '+result.size.toUpperCase();
        result.reasons.forEach(r=>{const li=document.createElement('li');li.textContent=r;list.appendChild(li);});
      }

      document.getElementById('estimateBtn').addEventListener('click',render);
      render();
    }
  </script>
</body>
</html>
